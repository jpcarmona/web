



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="El sitio de la informática">
      
      
        <link rel="canonical" href="https://jpcarmona.github.io/web/blog/proyecto/">
      
      
        <meta name="author" content="Juan Pedro Carmona Romero">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="en, es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Proyecto - El Rincón Vacío</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#proyecto-fin-de-curso-2o-de-asir-gestion-de-creacion-de-infraestrucutra-configuracion-y-administracion-de-software-con-awx" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://jpcarmona.github.io/web/" title="El Rincón Vacío" class="md-header-nav__button md-logo">
          
            <img src="../../img/favicon.ico" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                El Rincón Vacío
              </span>
              <span class="md-header-nav__topic">
                Proyecto
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/jpcarmona/generadormkdocs/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      jpcarmona/generadormkdocs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Inicio" class="md-tabs__link">
        Inicio
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../mkdocs/" title="Blog" class="md-tabs__link md-tabs__link--active">
          Blog
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://jpcarmona.github.io/web/" title="El Rincón Vacío" class="md-nav__button md-logo">
      
        <img src="../../img/favicon.ico" width="48" height="48">
      
    </a>
    El Rincón Vacío
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/jpcarmona/generadormkdocs/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      jpcarmona/generadormkdocs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Blog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Blog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mkdocs/" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kernel/" title="Kernel Linux" class="md-nav__link">
      Kernel Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plpgsql/" title="PL/SQL vs PL/PGSQL" class="md-nav__link">
      PL/SQL vs PL/PGSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oracleinstall/" title="Install Oracle 12" class="md-nav__link">
      Install Oracle 12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fail2ban/" title="Fail2Ban" class="md-nav__link">
      Fail2Ban
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../postgresclient/" title="Acceso remoto Postgresql" class="md-nav__link">
      Acceso remoto Postgresql
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gpg/" title="Cifrado y firmas con GPG" class="md-nav__link">
      Cifrado y firmas con GPG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../BBDD_1/" title="Interconexión de BBDD" class="md-nav__link">
      Interconexión de BBDD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../auditoriasBBDD/" title="Auditorías de BBDD" class="md-nav__link">
      Auditorías de BBDD
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Proyecto
      </label>
    
    <a href="./" title="Proyecto" class="md-nav__link md-nav__link--active">
      Proyecto
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" title="Introducción" class="md-nav__link">
    Introducción
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivos-de-este-proyecto" title="Objetivos de este proyecto" class="md-nav__link">
    Objetivos de este proyecto
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requisitos" title="Requisitos" class="md-nav__link">
    Requisitos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tecnologias-utilizadas" title="Tecnologías utilizadas" class="md-nav__link">
    Tecnologías utilizadas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infraestructura" title="Infraestructura" class="md-nav__link">
    Infraestructura
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forma-de-trabajo" title="Forma de trabajo" class="md-nav__link">
    Forma de trabajo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awx" title="AWX" class="md-nav__link">
    AWX
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-awx" title="¿ Qué es AWX ?" class="md-nav__link">
    ¿ Qué es AWX ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparacion-previa" title="Preparación previa" class="md-nav__link">
    Preparación previa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anexos" title="Anexos" class="md-nav__link">
    Anexos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anexo-1-creacion-entorno-virtual-de-python3" title="Anexo 1 - Creación entorno virtual de python3" class="md-nav__link">
    Anexo 1 - Creación entorno virtual de python3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="Sobre mí" class="md-nav__link">
      Sobre mí
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" title="Introducción" class="md-nav__link">
    Introducción
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivos-de-este-proyecto" title="Objetivos de este proyecto" class="md-nav__link">
    Objetivos de este proyecto
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requisitos" title="Requisitos" class="md-nav__link">
    Requisitos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tecnologias-utilizadas" title="Tecnologías utilizadas" class="md-nav__link">
    Tecnologías utilizadas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infraestructura" title="Infraestructura" class="md-nav__link">
    Infraestructura
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forma-de-trabajo" title="Forma de trabajo" class="md-nav__link">
    Forma de trabajo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awx" title="AWX" class="md-nav__link">
    AWX
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-awx" title="¿ Qué es AWX ?" class="md-nav__link">
    ¿ Qué es AWX ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparacion-previa" title="Preparación previa" class="md-nav__link">
    Preparación previa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anexos" title="Anexos" class="md-nav__link">
    Anexos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anexo-1-creacion-entorno-virtual-de-python3" title="Anexo 1 - Creación entorno virtual de python3" class="md-nav__link">
    Anexo 1 - Creación entorno virtual de python3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jpcarmona/generadormkdocs/edit/master/docs/blog/proyecto.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="proyecto-fin-de-curso-2o-de-asir-gestion-de-creacion-de-infraestrucutra-configuracion-y-administracion-de-software-con-awx">Proyecto fin de curso 2º de ASIR - Gestión de creación de infraestrucutra, configuración y administración de software con AWX<a class="headerlink" href="#proyecto-fin-de-curso-2o-de-asir-gestion-de-creacion-de-infraestrucutra-configuracion-y-administracion-de-software-con-awx" title="Permanent link">&para;</a></h1>
<h2 id="introduccion">Introducción<a class="headerlink" href="#introduccion" title="Permanent link">&para;</a></h2>
<p>Hablar sobre AWX, Ansible, la automatización de tareas, etc...</p>
<h3 id="objetivos-de-este-proyecto">Objetivos de este proyecto<a class="headerlink" href="#objetivos-de-este-proyecto" title="Permanent link">&para;</a></h3>
<h2 id="requisitos">Requisitos<a class="headerlink" href="#requisitos" title="Permanent link">&para;</a></h2>
<p>Para llevar a cabo el funcionamiento de este proyecto se hará uso de distintas tecnologías de sofware libre, se recomendaría tener conocimientos de algunas de estas tecnologías listadas a continuación. Además necesitaremos una infraestructura con OpenStack, en mi caso utilizo la de mi instituto.</p>
<h3 id="tecnologias-utilizadas">Tecnologías utilizadas<a class="headerlink" href="#tecnologias-utilizadas" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://docs.docker.com/get-started/">Docker</a> - La versión Community Edition "CE:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ docker --version
Docker version 18.09.6, build 481bc77
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/">Python3-pip</a> :</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ python3 -m pip --version
pip 19.1.1 from /home/user/.local/lib/python3.6/site-packages/pip (python 3.6)
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a> :</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ ansible --version
ansible 2.8.0
  config file = None
  configured module search path = [&#39;/home/user/.ansible/plugins/modules&#39;, &#39;/usr/share/ansible/plugins/modules&#39;]
  ansible python module location = /home/user/env/lib/python3.6/site-packages/ansible
  executable location = /home/user/env/bin/ansible
  python version = 3.6.5 (default, Apr  1 2018, 05:46:30) [GCC 7.3.0]
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://github.com/ansible/awx">AWX</a></li>
</ul>
<h3 id="infraestructura">Infraestructura<a class="headerlink" href="#infraestructura" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>En nuestro equipo local de desarrollo donde trabajaremos en este proyecto instalaremos la herramienta AWX</p>
</li>
<li>
<p>Servidor con Openstack:
Esta herramienta de cloud-computing me la proporcionará mi instituto.</p>
</li>
</ul>
<h2 id="forma-de-trabajo">Forma de trabajo<a class="headerlink" href="#forma-de-trabajo" title="Permanent link">&para;</a></h2>
<p>En esta ocasión se trabajará con la herramienta <code>git</code> con un repositorio remoto alojado en <a href="https://github.com/jpcarmona/proyectoawx">github</a> (este mismo repositorio).</p>
<p>Trabajaremos en local con un directorio definido de la siguiente manera:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>PROJECT_NAME=&quot;proyecto&quot;
PROJECT_DIR=&quot;${HOME}/${PROJECT_NAME}&quot;
mkdir -p $PROJECT_DIR
</pre></div>
</td></tr></table>

<p>Descargamos repositorio para trabajar con él:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>PROJECT_REPO_NAME=&quot;proyectoawx&quot;
PROJECT_REPO_URL=&quot;https://github.com/jpcarmona/proyectoawx.git&quot;
git clone $PROJECT_REPO_URL ${PROJECT_DIR}/${PROJECT_REPO_NAME}
</pre></div>
</td></tr></table>

<p>Para cada apartado se explicará el trabajo previo realizado para su posterior uso.</p>
<h2 id="awx">AWX<a class="headerlink" href="#awx" title="Permanent link">&para;</a></h2>
<h3 id="que-es-awx">¿ Qué es AWX ?<a class="headerlink" href="#que-es-awx" title="Permanent link">&para;</a></h3>
<p>Explicación AWX... , contenedores que lo forman...</p>
<h3 id="preparacion-previa">Preparación previa<a class="headerlink" href="#preparacion-previa" title="Permanent link">&para;</a></h3>
<p>En este apartado se explicará los pasos previos llevados a cabo para la posterior instalación de AWX.</p>
<p>Comentar que la instalación de esta herramienta puede ser realizada de 3 formas:</p>
<ul>
<li>Mediante Openshift</li>
<li>Usando Kubernetes</li>
<li>En local con Docker</li>
</ul>
<p>En mi caso he optado por utilizar la instalación el local con Docker ya que es la forma mas sencilla y viable.</p>
<ul>
<li>Descarga de repositorio de AWX:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>AWX_REPO_NAME=&quot;awx&quot;
AWX_REPO_URL=&quot;https://github.com/ansible/awx.git&quot;
git clone $REPO_URL ${PROJECT_DIR}/${REPO_NAME}
</pre></div>
</td></tr></table>

<p>En este repositorio podemos encontrar el propio instalador oficial de AWX que se basa en el propio uso de ansible con <code>inventory</code>, <code>playbooks</code> y <code>roles</code>.</p>
<p>Lo primero que haremos será definir las variables del inventory:</p>
<ul>
<li>Creamos inventory base sin comentarios ni líneas en blanco:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>cd ${PROJECT_DIR}/${AWX_REPO_NAME}/installer
cp inventory inventory.backup
cat inventory.backup | grep -Ev &quot;^#|^$&quot; &gt; inventory
</pre></div>
</td></tr></table>

<ul>
<li>Definimos variables añadiendo algunas que estaban comentadas necesarias quedando el fichero de una forma similar a esta:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>#&lt;-- Establecemos ansible_python_interpreter con el del entorno virtual utilizado
localhost ansible_connection=local ansible_python_interpreter=&quot;/home/usuario/proyecto/entorno/bin/python3&quot;
#--&gt;
[all:vars]
dockerhub_base=ansible
awx_task_hostname=awxtask
awx_web_hostname=awxweb
#&lt;-- Volumenes a montar en contenedores
postgres_data_dir=/var/lib/awx/pgdocker
project_data_dir=/var/lib/awx/projects
#--&gt;
#&lt;-- Renvío de puertos locales
host_port=80
host_port_ssl=443
#--&gt;
#&lt;-- Directorio que nos interesa para su posterior uso
docker_compose_dir=/tmp/awxcompose
#--&gt;
#&lt;-- Configuraciones de los distintos servicios de AWX
pg_username=pguser
pg_password=pgpass
pg_database=pgname
pg_port=5432
rabbitmq_password=rabbitmqpass
rabbitmq_erlang_cookie=rabbitmqcookie
admin_user=awxuser
admin_password=awxpass
secret_key=awxsecret
#--&gt;
#&lt;-- Para que no nos cree las imagenes de Docker
use_container_for_build=false
#--&gt;
</pre></div>
</td></tr></table>

<p>Con esto ya podríamos ejecutar el playbook pero antes realizaremos una modificación en una tarea de un rol. Esta modificación consistirá en comentar la tarea que nos crea los contenedores en local al lanzar el playbook, ya que esta tarea no tiene la acción parametrizada.</p>
<p>La tarea es "Start the containers" situada en "${PROJECT_DIR}/${AWX_REPO_NAME}/installer/roles/local_docker/tasks/compose.yml". Además también comentaremos las dos últimas tareas de este fichero que para nuestro caso no nos sirve para nada y se nos mostrará un error debido a que no se van a crear los contenedores.</p>
<p>Este playbook nos generará varios ficheros en el directorio en la variable <code>docker_compose_dir</code> que constará de ficheros de configuración y de un fichero para levantar los contenedores con <code>docker-compose</code>.</p>
<ul>
<li>Antes que nada debemos tener permisos en el directorio de los volumenes:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo mkdir -p /var/lib/awx/
sudo chown -R $USER. /var/lib/awx/
</pre></div>
</td></tr></table>

<ul>
<li>Ejecutamos playbook teniendo previamente creado un entorno virtual de python3[Anexo 1] con ansible instalado:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>ansible-playbook -i inventory install.yml
</pre></div>
</td></tr></table>

<p>*** Explicacion subida de dockercompose a github</p>
<p>*** Explicacion cifrado contraseñas con ansible-vault</p>
<h3 id="instalacion">Instalación<a class="headerlink" href="#instalacion" title="Permanent link">&para;</a></h3>
<h2 id="anexos">Anexos<a class="headerlink" href="#anexos" title="Permanent link">&para;</a></h2>
<h3 id="anexo-1-creacion-entorno-virtual-de-python3">Anexo 1 - Creación entorno virtual de python3<a class="headerlink" href="#anexo-1-creacion-entorno-virtual-de-python3" title="Permanent link">&para;</a></h3>
<ul>
<li>Instalamos el paquete de python3 que nos permite crear entornos virtuales:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>apt install python3-venv
</pre></div>
</td></tr></table>

<ul>
<li>Creamos y activamos entorno virtual:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>python3 -m venv ${PROJECT_DIR}/entorno
source ${PROJECT_DIR}/entorno/bin/activate
</pre></div>
</td></tr></table>

<ul>
<li>Instalamos ansible con pip(gestor de paquetes de python)</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>pip install ansible
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../auditoriasBBDD/" title="Auditorías de BBDD" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Auditorías de BBDD
              </span>
            </div>
          </a>
        
        
          <a href="../../about/" title="Sobre mí" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Sobre mí
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"> <img alt="Licencia Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a> <br />Esta obra está bajo una <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"> Licencia Creative Commons Atribución 4.0 Internacional</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/jpcarmona/" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/JPCR92" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
            <script src="../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-36723568-3","mkdocs.org"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>